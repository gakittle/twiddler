<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        // $body.html('');

        // Addition of tweet to page
        var timestamp = function(tweet) {
          var $timestamp = $('<div></div>');
          var timeShort = tweet.created_at.toString().slice(0, 21);
          $timestamp.text(timeShort);
          $timestamp.appendTo($body);
        };

        var postTweet = function(tweet) {
          var $tweet = $('<div class = \'tweet-generic\'></div>');
          var $userLink = $('<a class = \'user-link\' tweet.user></a>');
          $userLink.addClass(tweet.user);
          $userLink.text('@' + tweet.user);
          $userLink.appendTo($body);
          $tweet.text(': ' + tweet.message);
          $tweet.appendTo($body);
          timestamp(tweet);
        }

        // Generate first 10 tweets
        var index = streams.home.length - 1;
        var tweetTotal = streams.home.length;
        while(index >= 0){
          var newMessage = streams.home[index];
          postTweet(newMessage);
          index -= 1;
        }

        // Get new tweets upon button click
        var getNewTweets = function () {
          if (streams.home.length > tweetTotal) {
            for (var j = 0; j < streams.home.length - tweetTotal; j++) {
              var newMessage = streams.home[tweetTotal + j];
              postTweet(newMessage);
            }
            tweetTotal = streams.home.length;
          }
        };
        $('button').click(getNewTweets);

        // Show all tweets from one user
        var showUserTweets = function (username) {
          var usersTweets = streams.users[username];
          usersTweets.forEach(function (userTweet) {
            postTweet(userTweet);
          });
        }

        $('.shawndrost').click(function() {
          showUserTweets('shawndrost');
        });
        $('.sharksforcheap').click(function() {
          showUserTweets('sharksforcheap');
        });
        $('.mracus').click(function() {
          showUserTweets('mracus');
        });
        $('.douglascalhoun').click(function() {
          showUserTweets('douglascalhoun');
        });

      });

    </script>

    <section>
      <button type = 'button' class = 'btn'>Show New Warbs</button>
    </section>

    <style>
      .btn {
        background: yellow;
      }
      .user-link {
        color: blue;
      }
      .tweet-generic {
        display: inline;
      }
    </style>

  </body>
</html>
