<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        // $body.html('');

        var postTweet = function(tweet) {
          var $tweet = $('<div class = \'tweet-generic\'></div>');
          var $userLink = $('<a class = \'user-link\'></a>');
          $userLink.text('@' + tweet.user);
          $userLink.appendTo($body);
          $tweet.text(': ' + tweet.message);
          $tweet.appendTo($body);
          var $timestamp = $('<div></div>');
          $timestamp.text(tweet.created_at);
          $timestamp.appendTo($body);
        }

        var index = streams.home.length - 1;
        var tweetTotal = streams.home.length;
        while(index >= 0){
          var newMessage = streams.home[index];
          postTweet(newMessage);
          index -= 1;
        }

        var getNewTweets = function () {
          if (streams.home.length > tweetTotal) {
            for (var j = 0; j < streams.home.length - tweetTotal; j++) {
              var newMessage = streams.home[tweetTotal + j];
              postTweet(newMessage);
            }
            tweetTotal = streams.home.length;
          }
        };
        $('button').click(getNewTweets);

      });

    </script>

    <section>
      <button type = 'button' class = 'btn'>Show New Warbs</button>
    </section>

    <style>
      .btn {
        background: yellow;
      }
      .user-link {
        color: blue;
      }
      .tweet-generic {
        display: inline;
      }
    </style>

  </body>
</html>
